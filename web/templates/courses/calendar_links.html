{% extends "base.html" %}

{% block title %}
  Calendar Links - {{ session.title }}
{% endblock title %}
{% block content %}
  <div class="container py-4">
    <div class="row">
      <div class="col-12">
        <h1 class="mb-4">Add to Calendar</h1>
        <h4 class="text-muted mb-3">{{ session.course.title }} - {{ session.title }}</h4>
      </div>
    </div>
    <div class="row">
      <div class="col-md-8">
        <div class="card">
          <div class="card-body">
            <h5 class="card-title">Session Details</h5>
            <p>
              <strong>Date:</strong> {{ session.start_time|date:"F j, Y" }}
            </p>
            <p>
              <strong>Time:</strong> {{ session.start_time|time:"g:i A" }} - {{ session.end_time|time:"g:i A" }}
            </p>
            {% if session.is_virtual %}
              <p>
                <strong>Location:</strong> Virtual (link will be provided)
              </p>
            {% elif session.location %}
              <p>
                <strong>Location:</strong> {{ session.location }}
              </p>
            {% endif %}
            <p>{{ session.description }}</p>
          </div>
        </div>
        <div class="card mt-4">
          <div class="card-body">
            <h5 class="card-title">Calendar Options</h5>
            <div class="list-group">
              <!-- Google Calendar -->
              <a href="{{ calendar_links.google }}"
                 target="_blank"
                 class="list-group-item list-group-item-action">
                <div class="d-flex w-100 justify-content-between align-items-center">
                  <div>
                    <h6 class="mb-1">Add to Google Calendar</h6>
                    <small class="text-muted">Opens in a new window</small>
                  </div>
                  <i class="fas fa-external-link-alt"></i>
                </div>
              </a>
              <!-- Outlook Calendar -->
              <a href="{{ calendar_links.outlook }}"
                 target="_blank"
                 class="list-group-item list-group-item-action">
                <div class="d-flex w-100 justify-content-between align-items-center">
                  <div>
                    <h6 class="mb-1">Add to Outlook Calendar</h6>
                    <small class="text-muted">Opens in a new window</small>
                  </div>
                  <i class="fas fa-external-link-alt"></i>
                </div>
              </a>
              <!-- iCal Feed -->
              <a href="{% url 'calendar_feed' %}"
                 class="list-group-item list-group-item-action">
                <div class="d-flex w-100 justify-content-between align-items-center">
                  <div>
                    <h6 class="mb-1">Download iCal File</h6>
                    <small class="text-muted">Compatible with Apple Calendar, Outlook, and other calendar apps</small>
                  </div>
                  <i class="fas fa-download"></i>
                </div>
              </a>
            </div>
          </div>
        </div>
      </div>
      <div class="col-md-4">
        <div class="card">
          <div class="card-body">
            <h5 class="card-title">Need Help?</h5>
            <p class="card-text">
              Choose your preferred calendar application from the options on the left. The session will be automatically added to your calendar with all the necessary details.
            </p>
            <h6 class="mt-3">Calendar Sync Instructions:</h6>
            <ul class="list-unstyled">
              <li>
                <i class="fas fa-check text-success me-2"></i> Click your preferred calendar option
              </li>
              <li>
                <i class="fas fa-check text-success me-2"></i> Review the event details
              </li>
              <li>
                <i class="fas fa-check text-success me-2"></i> Click save or add to calendar
              </li>
              <li>
                <i class="fas fa-check text-success me-2"></i> The session is now in your calendar!
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
{% endblock content %}
